{% extends "base.html" %}
{% block title %}Dashboard - Archive System{% endblock %}
{% block page_title %}Dashboard{% endblock %}
{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon orange">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
        </div>
        <div class="stat-value">{{ total_docs }}</div>
        <div class="stat-label">Total Documents</div>
        <div class="stat-change positive">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            </svg>
            {{ docs_this_month }} this month
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon green">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        </div>
        <div class="stat-value">{{ total_categories }}</div>
        <div class="stat-label">Categories</div>
        <div class="stat-change positive">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            </svg>
            Organized
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon blue">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <line x1="4" y1="9" x2="20" y2="9"></line>
                <line x1="4" y1="15" x2="20" y2="15"></line>
                <line x1="10" y1="3" x2="8" y2="21"></line>
                <line x1="16" y1="3" x2="14" y2="21"></line>
            </svg>
        </div>
        <div class="stat-value">{{ total_tags }}</div>
        <div class="stat-label">Tags</div>
        <div class="stat-change positive">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            </svg>
            Labeled
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon purple">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        </div>
        <div class="stat-value">{{ total_periods }}</div>
        <div class="stat-label">Academic Periods</div>
        <div class="stat-change positive">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            </svg>
            Active
        </div>
    </div>
</div>

<div class="grid-2">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Recent Documents</h3>
            <a href="{{ url_for('documents.list') }}" class="panel-action">View all →</a>
        </div>
        <div class="card-body" style="padding: 0;">
            {% if recent_uploads %}
                {% for doc in recent_uploads %}
                <a href="{{ url_for('documents.detail', doc_id=doc.id) }}" class="doc-item">
                    {% set ext = doc.original_filename.split('.')[-1].lower() if doc.original_filename else 'pdf' %}
                    <div class="doc-icon {{ ext }}">{{ ext }}</div>
                    <div class="doc-info">
                        <div class="doc-name">{{ doc.title }}</div>
                        <div class="doc-meta">{{ doc.category.name if doc.category else 'Uncategorized' }} • {{ doc.uploaded_at.strftime('%b %d, %Y') }}</div>
                    </div>
                </a>
                {% endfor %}
            {% else %}
            <div class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
                <h3>No documents yet</h3>
                <p>Upload your first document to get started</p>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Recent Activity</h3>
            <a href="{{ url_for('admin.logs') }}" class="panel-action">View all →</a>
        </div>
        <div class="card-body" style="padding: 0;">
            {% if recent_activity %}
                {% for log in recent_activity %}
                <div class="activity-item">
                    <div class="activity-avatar">{{ log.admin_user.full_name.split()[0][0] if log.admin_user and log.admin_user.full_name else 'A' }}</div>
                    <div class="activity-content">
                        <div class="activity-text">
                            <strong>{{ log.admin_user.full_name if log.admin_user and log.admin_user.full_name else 'Admin' }}</strong>
                            {{ log.action }}
                            {% if log.document %}
                                <em>{{ log.document.title|truncate(25) }}</em>
                            {% endif %}
                        </div>
                        <div class="activity-time">{{ log.timestamp.strftime('%b %d, %Y %H:%M') }}</div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
            <div class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
                <h3>No activity yet</h3>
                <p>Activity will appear here as you use the system</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <h3 class="card-title">Quick Actions</h3>
    </div>
    <div class="card-body">
        <div class="grid-4" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
            <a href="{{ url_for('documents.upload') }}" class="action-btn" style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: var(--color-surface-elevated); border: 1px solid var(--color-border); border-radius: 10px; text-decoration: none; color: var(--color-text); transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="none" stroke="var(--color-accent)" stroke-width="2" style="width: 20px; height: 20px;">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                <span style="font-family: var(--font-display); font-size: 0.875rem; font-weight: 500;">Upload</span>
            </a>
            <a href="{{ url_for('documents.list') }}" class="action-btn" style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: var(--color-surface-elevated); border: 1px solid var(--color-border); border-radius: 10px; text-decoration: none; color: var(--color-text); transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="none" stroke="var(--color-blue)" stroke-width="2" style="width: 20px; height: 20px;">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
                <span style="font-family: var(--font-display); font-size: 0.875rem; font-weight: 500;">Browse</span>
            </a>
            <a href="{{ url_for('search.index') }}" class="action-btn" style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: var(--color-surface-elevated); border: 1px solid var(--color-border); border-radius: 10px; text-decoration: none; color: var(--color-text); transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="none" stroke="var(--color-secondary)" stroke-width="2" style="width: 20px; height: 20px;">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <span style="font-family: var(--font-display); font-size: 0.875rem; font-weight: 500;">Search</span>
            </a>
            <a href="{{ url_for('admin.logs') }}" class="action-btn" style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: var(--color-surface-elevated); border: 1px solid var(--color-border); border-radius: 10px; text-decoration: none; color: var(--color-text); transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="none" stroke="var(--color-purple)" stroke-width="2" style="width: 20px; height: 20px;">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                </svg>
                <span style="font-family: var(--font-display); font-size: 0.875rem; font-weight: 500;">Logs</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
